---
title: 端口转发和端口映射
date: 2020-08-15 15:59:12
tags:
- 端口转发和映射
categories:
- 计算机

---


# 端口转发 #

> 就是将端口进行转发，比如我们拿到一台内外服务器 A 的权限，通过扫描发现了同内网的另一台服务器 B 且开了 80 端口，我们该如何使用浏览器访问它呢？我们画一个图如下：

![端口转发](/images/计算机/端口/端口转发.png)


从上图中可以看到，我们已经与 A 建立了通道，我们可以在 A 上上传任意文件，执行任意的系统命令，我们如何能够访问 B 的 80 端口？假设 A 是在公网上，有公网 IP，我们可以访问它的任意端口。

**在 A 上执行端口转发，将 B 的 80 端口转发到 A 的 8080，然后我们直接用浏览器访问 A 的 8080 端口即可，这个原理就是端口转发**

**端口转发就是将一个端口，这个端口可以本机的端口也可以是本机可以访问到的任意主机的端口都可以转发到任意一台可以访问到的 IP 上，通常这个IP是公网IP，方便我们使用。**



# 端口映射 #


> 顾名思义，就是映射端口，就是将一个内网端口映射到公网上的某个端口。


A 和 B 在不同的内网，各自有自己的内网 IP ，但是互相无法直接访问，这时就需要一个中间服务器，要 A 和 B 都可以访问然后作为中转服务器，实现相互访问，这个中间服务器需要有一个公网 IP，如图：

![端口映射2](/images/计算机/端口/端口映射2.png)


上图的 C 就是有公网 IP 的中间服务器，**我们可以将 A 的 80 端口映射到 C 的 80 端口，这时，B 就可以访问 C 的 80 端口，也就相当于访问 A 的 80 端口了，这里其实核心原理也是端口转发，只不过是将本机的端口转发到远程的某个端口。**



# 总结 #

**我们将本机的端口转发到远程某个端口，我们可以叫端口映射，也可以叫端口转发；我们如果把本机可以访问到的任意 IP 的端口转发到另外一台服务器的端口，我们叫它端口转发。**