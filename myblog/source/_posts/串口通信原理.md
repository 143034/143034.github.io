---
title: 串口通信原理
date: 2020-07-27 20:46:44
tags:
- stm32
categories:
- 单片机
- stm32

---

# 介绍 #

## 处理器与外部设备通信的两种方式： ##

	并行通信
	   -传输原理：数据各个位同时传输。
	   -优点：速度快
	   -缺点：占用引脚资源多
	
	串行通信
	   -传输原理：数据按位顺序传输。
	   -优点：占用引脚资源少
	   -缺点：速度相对较慢

## 串行通信： ##
	按照数据传送方向，分为：
	单工：
	           数据传输只支持数据在一个方向上传输
	半双工：
	           允许数据在两个方向上传输，但是，在某一时刻，只允许数
	            据在一个方向上传输，它实际上是一种切换方向的单工通信；
	全双工：
	           允许数据同时在两个方向上传输，因此，全双工通信是两个
	           单工通信方式的结合，它要求发送设备和接收设备都有独立
	           的接收和发送能力。
 
![串口通信传送模式](/images/单片机/stm32/串口/串口通信传送模式.png)


## 串行通信的通信方式 ##
	同步通信：带时钟同步信号传输。
	    -SPI，IIC通信接口
	异步通信：不带时钟同步信号。
	    -UART(通用异步收发器),单总线


## 常见的串行通信接口： ##

 
	通信标准	                            引脚说明	            通信方式	    通信方向
	UART(通用异步收发器)	  TXD:发送端 RXD:接受端 GND:公共地	    异步通信	     全双工


## STM32的串口通信接口  ##

	UART:通用异步收发器
	USART:通用同步异步收发器
	
	大容量STM32F10x系列芯片，包含3个USART和2个UART

## UART异步通信方式引脚连接方法： ##
    RXD:数据输入引脚。数据接受。
    TXD:数据发送引脚。数据发送。


![芯片到芯片](/images/单片机/stm32/串口/芯片到芯片.png) 

![芯片到pc](/images/单片机/stm32/串口/芯片到pc.png)


## UART异步通信方式引脚： ##
	RXD:数据输入引脚。数据接受。
	TXD:数据发送引脚。数据发送。
	串口号	  RXD	   TXD
	1	      PA10	   PA9
	2	      PA3	   PA2
	3	      PB11	   PB10
	4	      PC11	   PC10
	5	      PD2	   PC12



## UART异步通信方式特点： ##
	全双工异步通信。
	分数波特率发生器系统，提供精确的波特率。
	发送和接受共用的可编程波特率，最高可达4.5Mbits/s
	可编程的数据字长度（8位或者9位）；
	可配置的停止位（支持1或者2位停止位）；
	可配置的使用DMA多缓冲器通信。
	单独的发送器和接收器使能位。
	检测标志：① 接受缓冲器  ②发送缓冲器空 ③传输结束标志
	多个带标志的中断源。触发中断。
	其他：校验控制，四个错误检测标志。


## 串口通信过程 ##

![串口通信过程](/images/单片机/stm32/串口/串口通信过程.png)


## STM32串口异步通信需要定义的参数： ##
	 起始位
	 数据位（8位或者9位）
	 奇偶校验位（第9位）
	 停止位（1,15,2位）
	 波特率设置

![例子](/images/单片机/stm32/串口/例子.png)

![USART框图](/images/单片机/stm32/串口/USART框图.png)