---
title: Lcd1602程序
date: 2020-08-13 14:59:58
tags: 
- lcd1602
- 52
categories:
- 单片机
- 52单片机

---

# 一、介绍 #

## 接口信号说明 ##

![接口信号说明](/images/单片机/52单片机/lcd1602/接口信号说明.png)


## 基本操作时序 ##

### 1、读状态 ###

**输入：RS = L,RW = H,E = H;                        输出：DO~D7状态字**

### 2、写指令 ###

**输入：RS = L,RW = L,E = 高脉冲，DO~D7指令码;        输出：无**

### 3、读数据 ###

**输入：RS = H,RW = H,E = H;                        输出：DO~D7数据**

### 4、写数据 ###

**输入：RS = H,RW = L,E = H;                        输出：无**


## 指令介绍 ##

### 1、显示模式设置 ###

![指令集1](/images/单片机/52单片机/lcd1602/指令集1.png)


### 2、显示开关和光标设置 ###


![显示开关和光标设置](/images/单片机/52单片机/lcd1602/显示开关和光标设置.png)



### 3、数据指针设置 ###


![数据指针设置](/images/单片机/52单片机/lcd1602/数据指针设置.png)



### 4、清屏 ###


![清屏设置](/images/单片机/52单片机/lcd1602/清屏设置.png)



### 5、初始化过程: ###



- **写指令0x38**     //显示模式设置

- **写指令0x0c**     //显示开，关光标

- **写指令0x06**     //光标不移动，屏幕不移动

- **写指令0x01**     //清屏



# 二、程序 #



## lcd1602.h ##

	#ifndef __LCD1602_H_
	
	#define __LCD1602_H_
	
	#include "reg52.h"
	
	#define uchar unsigned char
	
	#define uint unsigned int
	
	#define DB P0
	
	sbit  RS = P2^0;
	sbit  RW = P2^1;
	sbit  E  = P2^2;
	
	
	void lcd_wri_com(unsigned char com);
	
	void lcd_wri_data(unsigned char dat);
	
	void wri_string(unsigned char y,unsigned char x,unsigned char *p);
	
	void lcd_write_char(unsigned char y, unsigned char x, unsigned char dat);
	
	void lcd1602_guanbiao(unsigned char y, unsigned char x,unsigned char on_off);
	
	void lcd_init(void);
	
	void delay_ms(unsigned int cnt) ; 
	
	
	
	#endif


## lcd1602.c ##

	#include "lcd1602.h"
	
	void lcd_wri_com(unsigned char com)	  //写入命令
	{
		E = 0;	 //使能清零
		RS = 0;	 //选择写入命令
		RW = 0;	 //选择写入
	
		DB = com;
		delay_ms(1);
	
		E = 1;	 //写入时序
		delay_ms(5);
		E = 0;
	}
	
	/*******************************************************************************
	* 函 数 名         : LcdWriteData
	* 函数功能		   : 向LCD写入一个字节的数据
	* 输    入         : u8dat
	* 输    出         : 无
	*******************************************************************************/
	
	void lcd_wri_data(unsigned char dat)//写入数据
	{
		E = 0;	  //使能清零
		RS = 1;	  //选择写入数据
		RW = 0;	  //选择写入
		DB = dat;
		delay_ms(1);
		E = 1;	  //写入时序
		delay_ms(5);
		E = 0;
	}
	/*******************************************************************************
	* 函 数 名         : WriString
	* 函数功能		   : 刷新屏幕显示
	* 输    入         : hang，add，*p
	* 输    出         : 无
	*******************************************************************************/
	void wri_string(unsigned char y,unsigned char x,unsigned char *p)
	{
		if(y==1)//如果选择第一行
			lcd_wri_com(0x80+x);//选中地址
		else
			lcd_wri_com(0xc0+x);//选中地址
			while(*p)
			{
				lcd_wri_data(*p);//写入数据
				p++;
			}
	}
	/*******************************************************************************
	* 函 数 名         : lcd_write_char
	* 函数功能		   :
	* 输    入         :
	* 输    出         : 无
	*******************************************************************************/
	void lcd_write_char(unsigned char y, unsigned char x, unsigned char dat) //列x=0~15,行y=0,1
	{
		unsigned char temp_l, temp_h;
		if(y==1)//如果选择第一行
			lcd_wri_com(0x80+x);//选中地址
		else
			lcd_wri_com(0xc0+x);//选中地址
		temp_l = dat % 10;
	    temp_h = dat / 10;
	    lcd_wri_data(temp_h + 0x30);          //convert to ascii
	    lcd_wri_data(temp_l + 0x30);
	}
	
	
	/*******************************************************************************
	* 函 数 名       : LcdInit()
	* 函数功能		 : 初始化LCD屏
	* 输    入       : 无
	* 输    出       : 无
	*******************************************************************************/
	void lcd_init(void)						  //LCD初始化子程序
	{
		lcd_wri_com(0x38);//置功能8位双行
		lcd_wri_com(0x0c);//显示开关光标
		lcd_wri_com(0x06);//字符进入模式屏幕不动字符后移
		delay_ms(5);//延时5ms
		lcd_wri_com(0x01);  //清屏
		wri_string(2,0,"H:   %RH T:   C ");//初始化显示
	}
	
	void delay_ms(unsigned int cnt)   //
	{
		unsigned int x;
		for( ; cnt>0; cnt--)
		{
			for(x=110; x>0; x--);//软件延时为1MS
		}
	}